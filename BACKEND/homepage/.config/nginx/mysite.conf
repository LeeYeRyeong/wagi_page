server {
    listen 80;
    server_name sswu-wagi.com;
    charset utf-8;
    client_max_body_size 128M;

    location / {
        uwsgi_pass  unix:///tmp/mysite.sock;
        include     uwsgi_params;
    }
    location /static/ {
        alias /srv/wagi_page/BACKEND/homepage/static_root/;
    }
    location ~ [^/]\.php(/|$) {
        fastcgi_split_path_info ^(.+?\.php)(/.*)$;
        if (!-f $document_root$fastcgi_script_name) {
            return 404;
        }
        #fastcgi_connect_timeout 90; # default 60
        #fastcgi_send_timeout 90; # default 60
        fastcgi_read_timeout 300;
        fastcgi_pass unix:/run/php/myuser1.sock;
        fastcgi_index index.php;
        fastcgi_buffers 64 16k; # default 8 4k
         
        include fastcgi_params;
    
}
log_format my_custom_format '$remote_addr - $remote_user [$time_local] "$request" '
                          '$status $body_bytes_sent "$http_referer" '
                          '"$http_user_agent" "$http_x_forwarded_for" '
                          '$request_time $upstream_response_time';

access_log /var/log/nginx/access.log my_custom_format;

